from dns.resolver import Resolver
import dns
port = 1866
or_resolver = None

def get_or_resolver():
    """Get the default resolver, initializing it if necessary."""
    global or_resolver
    if or_resolver is None:
        or_resolver = Resolver(port=port, filename='/home/students/cs091747/openreplica/resolver.conf')
    return or_resolver

def query(qname, rdtype=dns.rdatatype.A, rdclass=dns.rdataclass.IN,
          tcp=False, source=None, raise_on_no_answer=True,
          source_port=0):
    """Query nameservers to find the answer to the question.

    This is a convenience function that uses the default resolver
    object to make the query.
    @see: L{dns.resolver.Resolver.query} for more information on the
    parameters."""
    return get_or_resolver().query(qname, rdtype, rdclass, tcp, source,
                                        raise_on_no_answer, source_port)